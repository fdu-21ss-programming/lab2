# Lab 2

> 本次lab目标：
>
> 1. 进一步规范编程习惯
> 2. 了解C标准库<math.h>
> 3. 在头歌平台使用编程解决实际问题



## 获取及提交lab

**获取**：通过 `https://github.com/fdu-21ss-programming/lab2`或者`超星平台`获取。

**提交**：本次lab附带的练习题将于2021年9月30日15:25发布于头歌平台

**截止时间**：2021年10月3日 23:59:59



## 1. lab1回顾

> LAB1我们学习并练习了C语言中的加减乘除运算，学习了如何定义宏常量，并当场演示了如何理解程序的报错信息

- **学会截图**

  在本次上传的作业文档中，还有一部分同学采取的是拍照上传将其插入文档的方式。

  For Windows：

  全屏截图——电脑最上面一排靠右有一个标有“PrtScr”的快捷键，直接按下后，剪贴板中会有当时的全屏截图，直接Ctrl+v或者鼠标右键-粘贴，将图片粘贴到文档中即可

  自定义尺寸截图——win+shift+s后屏幕会变灰表示已进入可截图状态，用鼠标选取截图区域

  For Mac:

  全屏截图——Command + Shift + 3，按下快捷键后直接就能听到一个简短的照相机快门声音，跟区域截图一样，在桌面可以看到一个格式为“.Png”的截图文件

  自定义尺寸截图——Command + Shift + 4，光标将变成一个小有刻着十字标尺线的十字线；单击并拖动鼠标来突出你想截图的区域。拖动光标，选区将会出现半透明灰色矩形；放开鼠标。你就会听到一个简短的照相机快门声音，这是一个截图完成信号，说明你截图成功了，在桌面即可看到格式为“.Png”的截图文件

- **代码要正确缩进**

  正确缩进的代码能显著地提高可读性，具体见于 [C语言代码规范（一）缩进与换行](https://blog.csdn.net/Dr_Haven/article/details/81868857)

- **学会简单地测试自己的程序**

  上机作业往往会给出一个简单的示例输入，但是仅仅依靠这一个输入就想检测程序的正确性显然是不太现实。对于一个程序，应该尽量多尝试几组具有不同性质的输入，这里的性质对于不同程序来说是不同的，以LAB1第一题计算三角形面积为例，示例输入的底和高的乘积为偶数，因此应该考虑用乘积为奇数的底和高来测试一下程序是否能正确运行。（对于第一题除法直接用乘积除以2的同学，如果尝试了乘积为奇数的情况，就会发现此时会自动取整）

### 第一题 - 计算三角形面积

题目

> 输入三角形的底和高，输出三角形的面积。

限制

> 底和高均为整数，面积保留两位小数。

示例

> 请输入三角形的底和高：10,5
>
> 三角形的面积为：25.00

出现的问题：

```c
1. 没有实现输入功能，如：
    int a = 3;
    int h = 5;
    printf("请输入三角形的底和高：%d, %d", a, h);
后续几题也有同学没实现输入功能。
    
2. 由于除法自动取整导致的运算错误（除法参与运算的量均为整数时，结果为整数，自动舍去小数。如果运算量中有一个为浮点数，结果为浮点数。将存储结果的变量定义为浮点数是没用的，也会自动取整，如：
    float s = (float)(5 / 3);
此时s为1.000000）
```

参考答案：

```C
int main() { 
    int a,h; 
    printf("请输入三角形的底和高："); 
    scanf("%d,%d",&a,&h);	/* 不能有\n */ 
    float s = 0.5 * a * h; 
    printf("三角形的面积为：%.2f\n",s); 
    return 0; 
}
```



### 第二题 - 计算等差数列的和

题目

> 输入等差数列的首项、等差和总项数，输出等差数列的和

限制

> 首项，等差和总项数均为整数

示例

> 请输入等差数列的首项：1
>
> 请输入等差数列的等差：2
>
> 请输入等差数列的总项数：3
>
> 等差数列的和为：9

出现的问题：

```c
1. 使用循环相加求解（确实能得出正确答案，但是从程序的复杂度方面来看没必要）
```

参考答案：

```C
int main() { 
    int a0,d,num; 
    printf("请输入等差数列的首项："); 
    scanf("%d",&a0); 
    printf("请输入等差数列的等差："); 
    scanf("%d",&d); 
    printf("请输入等差数列的总项数："); 
    scanf("%d",&num); 
    int sum = (2 * a0 + (num - 1) * d) * num / 2; 
    printf("等差数列的和为：%d\n",sum); 
    return 0; 
}
```



### 第三题 - 计算圆的周长和面积

题目

> 输入圆的半径，求圆的周长和面积。要求定义以下宏常量：
>
> \#define PI 3.14159

限制

> 圆的半径为整数，输出保留2位小数

示例

> 请输入圆的半径：1
>
> 圆的周长为6.28，圆的面积为3.14

出现的问题：

```c
1. 没有使用宏
2. 遗漏了求周长或求面积
3. scanf使用错误，如：
    scanf("%d", r);
导致整个程序错误
4. 输出未保留两位小数
```

参考答案：

```C
#define PI 3.14159 

int main() { 
    int r; 
    printf("请输入圆的半径："); 
    scanf("%d",&r); 
    printf("圆的面积为%.2f,圆的周长为%.2f\n",PI * r * r,2 * PI * r); 
    return 0; 
}
```



### 第四题 - 计算和、乘积与平均数

题目

> 输入三个整数，输出三个整数的和，乘积与平均数。

限制

> 平均数保留两位小数

示例

> 请输入三个整数：1,2,3
>
> 三个整数的和为6，乘积为6，平均数为2.00

出现的问题：

```c
1. 由于除法自动取整导致的运算错误
2. 遗漏了求和
```

参考答案：

```C
int main() { 
    int a,b,c; 
    printf("请输入三个整数："); 
    scanf("%d,%d,%d",&a,&b,&c); 
    int sum = a + b + c; 
    printf("三个数的和%d,乘积为%d,平均数为%.2f\n", sum, a * b * c, sum / 3.0); 
    return 0; 
}
```



### 第五题 - 温度转换

题目

> 温度转换：键盘读入华氏温度，输出摄氏温度。

限制

> 输入华氏温度为浮点数，输出摄氏温度保留两位小数

提示

> 华氏温度 = (9/5) * 摄氏温度 + 32

示例

> 请输入华氏温度：32.0
>
> 摄氏温度为0.00

出现的问题：

```c
1. 忽略了除法自动取整带来的问题，如：
    (f - 32) * (5 / 9)
此s
```

参考答案：

```C
int main() { 
    float c,f; 
    printf("请输入华氏温度："); 
    scanf("%f",&f); 
    c = (f - 32) * 5 / 9; 
    printf("摄氏温度为%.2f\n",c); 
    return 0; 
}
```



## 2. C标准库 - <math.h>

> 在这次即将发布的作业中，我们将要用到math.h头文件中的函数，所以在这里会简单介绍一下其中几个函数的用法。

这个标准库定义了各种数学函数，库中所有可用的功能都带有一个**double**类型的参数，且都返回**double**类型的结果。

### 引入标准库

```c
#include <math.h>
```

最好在文件最开头就引入标准库。

只有引入库后，编译器才能正确识别程序对于库中函数的调用；否则编译阶段就会报错称程序中有未声明的函数。

### 部分库函数

| 函数                            | 描述                                  |
| ------------------------------- | ------------------------------------- |
| double log10(double x)          | 返回 x 的常用对数（基数为 10 的对数） |
| double log(double x)            | 返回 x 的自然对数（基数为 e 的对数）  |
| double exp(double x)            | 返回 e 的 x 次幂的值                  |
| double pow(double x, double y)  | 返回 x 的 y 次幂                      |
| double sqrt(double x)           | 返回 x 的平方根                       |
| double fabs(double x)           | 返回 x 的绝对值                       |
| double ceil(double x)           | 返回大于或等于 x 的最小的整数值       |
| double floor(double x)          | 返回小于或等于 x 的最大的整数值       |
| double fmod(double x, double y) | 返回 x 除以 y 的余数                  |

**fmod()函数与%取余符号的区别：**

%只用于整型的计算，且后一个数不能为0；

fmod()可以对浮点型数据进行取模运算，后一个数可以为0，此时返回NaN(Not a Number)



## 3. 思考题

> 本版块会不定期地收集由同学们提出的一些有价值的问题，加深大家对于C语言的理解

已知：

有符号数 = 1位符号位 + n-1位数据位

无符号数 = n位数据位

12345用二进制表示为$11\ 0000\ 0011\ 1001$​

若定义 int a = -12345，此时，-12345以补码的方式存储，且int占据32位的存储空间，即$1111\ 1111\ 1111\ 1111\ 1100\ 1111\ 1100\ 0111$

输出时若以unsigned的方式读取（%u），则认为此处存储的是一个无符号数，会将$1111\ 1111\ 1111\ 1111\ 1100\ 1111\ 1100\ 0111$都视为数据位，因此输出结果就是将该补码直接转换成十进制，即4294954951



问题：

1. ```c
   short a;
   a=-12345u;
   printf(“%u”,a);
   ```

   这段代码的输出结果为什么是4294954951，而不是53191？

   提示：-12345（默认int型）的补码$1111\ 1111\ 1111\ 1111\ 1100\ 1111\ 1100\ 0111$​​，而short型只有16位，因此截取最小的16位$1100\ 1111\ 1100\ 0111$​​​​​直接转换成十进制得到53191

2. ```c
   short b;
   b = -123456;
   printf("%u,%d",b,b);
   ```

   这段代码的输出结果为什么是7616,7616？

   提示：-123456（默认int型）的补码为$1111\ 1111\ 1111\ 1110\ 0001\ 1101\ 1100\ 0000$​

